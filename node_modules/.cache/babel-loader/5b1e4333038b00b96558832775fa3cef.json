{"remainingRequest":"/Users/zsy/Projects/about_me/node_modules/thread-loader/dist/cjs.js!/Users/zsy/Projects/about_me/node_modules/babel-loader/lib/index.js!/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zsy/Projects/about_me/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zsy/Projects/about_me/node_modules/healen-x-ui/packages/uploader/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zsy/Projects/about_me/node_modules/healen-x-ui/packages/uploader/index.vue","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport create from '../utils/create';\nexport default create({\n  name: 'uploader',\n  inheritAttrs: false,\n  props: {\n    disabled: Boolean,\n    beforeRead: Function,\n    afterRead: Function,\n    accept: {\n      type: String,\n      default: 'image/*'\n    },\n    resultType: {\n      type: String,\n      default: 'dataUrl'\n    },\n    maxSize: {\n      type: Number,\n      default: Number.MAX_VALUE\n    }\n  },\n  methods: {\n    onChange: function onChange(event) {\n      var _this = this;\n\n      var files = event.target.files;\n\n      if (this.disabled || !files.length) {\n        return;\n      }\n\n      files = files.length === 1 ? files[0] : [].slice.call(files, 0);\n\n      if (!files || this.beforeRead && !this.beforeRead(files)) {\n        return;\n      }\n\n      if (Array.isArray(files)) {\n        Promise.all(files.map(this.readFile)).then(function (contents) {\n          var oversize = false;\n          var payload = files.map(function (file, index) {\n            if (file.size > _this.maxSize) {\n              oversize = true;\n            }\n\n            return {\n              file: files[index],\n              content: contents[index]\n            };\n          });\n\n          _this.onAfterRead(payload, oversize);\n        });\n      } else {\n        this.readFile(files).then(function (content) {\n          _this.onAfterRead({\n            file: files,\n            content: content\n          }, files.size > _this.maxSize);\n        });\n      }\n    },\n    readFile: function readFile(file) {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        var reader = new FileReader();\n\n        reader.onload = function (event) {\n          resolve(event.target.result);\n        };\n\n        if (_this2.resultType === 'dataUrl') {\n          reader.readAsDataURL(file);\n        } else if (_this2.resultType === 'text') {\n          reader.readAsText(file);\n        }\n      });\n    },\n    onAfterRead: function onAfterRead(files, oversize) {\n      if (oversize) {\n        this.$emit('oversize', files);\n      } else {\n        this.afterRead && this.afterRead(files);\n        this.$refs.input && (this.$refs.input.value = '');\n      }\n    }\n  }\n});",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div :class=\"b()\">\n    <slot />\n    <input\n      v-bind=\"$attrs\"\n      ref=\"input\"\n      type=\"file\"\n      :class=\"b('input')\"\n      :accept=\"accept\"\n      :disabled=\"disabled\"\n      @change=\"onChange\"\n    >\n  </div>\n</template>\n\n<script>\nimport create from '../utils/create';\n\nexport default create({\n  name: 'uploader',\n\n  inheritAttrs: false,\n\n  props: {\n    disabled: Boolean,\n    beforeRead: Function,\n    afterRead: Function,\n    accept: {\n      type: String,\n      default: 'image/*'\n    },\n    resultType: {\n      type: String,\n      default: 'dataUrl'\n    },\n    maxSize: {\n      type: Number,\n      default: Number.MAX_VALUE\n    }\n  },\n\n  methods: {\n    onChange(event) {\n      let { files } = event.target;\n      if (this.disabled || !files.length) {\n        return;\n      }\n\n      files = files.length === 1 ? files[0] : [].slice.call(files, 0);\n      if (!files || (this.beforeRead && !this.beforeRead(files))) {\n        return;\n      }\n\n      if (Array.isArray(files)) {\n        Promise.all(files.map(this.readFile)).then(contents => {\n          let oversize = false;\n          const payload = files.map((file, index) => {\n            if (file.size > this.maxSize) {\n              oversize = true;\n            }\n\n            return {\n              file: files[index],\n              content: contents[index]\n            };\n          });\n\n          this.onAfterRead(payload, oversize);\n        });\n      } else {\n        this.readFile(files).then(content => {\n          this.onAfterRead(\n            { file: files, content },\n            files.size > this.maxSize\n          );\n        });\n      }\n    },\n\n    readFile(file) {\n      return new Promise(resolve => {\n        const reader = new FileReader();\n\n        reader.onload = event => {\n          resolve(event.target.result);\n        };\n\n        if (this.resultType === 'dataUrl') {\n          reader.readAsDataURL(file);\n        } else if (this.resultType === 'text') {\n          reader.readAsText(file);\n        }\n      });\n    },\n\n    onAfterRead(files, oversize) {\n      if (oversize) {\n        this.$emit('oversize', files);\n      } else {\n        this.afterRead && this.afterRead(files);\n        this.$refs.input && (this.$refs.input.value = '');\n      }\n    }\n  }\n});\n</script>\n"],"sourceRoot":"node_modules/healen-x-ui/packages/uploader"}]}