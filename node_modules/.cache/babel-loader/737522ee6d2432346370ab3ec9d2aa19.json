{"remainingRequest":"/Users/zsy/Projects/about_me/node_modules/thread-loader/dist/cjs.js!/Users/zsy/Projects/about_me/node_modules/babel-loader/lib/index.js!/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zsy/Projects/about_me/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zsy/Projects/about_me/node_modules/healen-x-ui/packages/contact-edit/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zsy/Projects/about_me/node_modules/healen-x-ui/packages/contact-edit/index.vue","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/zsy/Projects/about_me/node_modules/@babel/runtime/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Field from '../field';\nimport VanButton from '../button';\nimport Dialog from '../dialog';\nimport Toast from '../toast';\nimport validateMobile from '../utils/validate/mobile';\nimport create from '../utils/create';\nvar defaultContact = {\n  id: '',\n  tel: '',\n  name: ''\n};\nexport default create({\n  name: 'contact-edit',\n  components: {\n    Field: Field,\n    VanButton: VanButton\n  },\n  props: {\n    isEdit: Boolean,\n    isSaving: Boolean,\n    isDeleting: Boolean,\n    contactInfo: {\n      type: Object,\n      default: function _default() {\n        return _objectSpread({}, defaultContact);\n      }\n    },\n    telValidator: {\n      type: Function,\n      default: validateMobile\n    }\n  },\n  data: function data() {\n    return {\n      data: _objectSpread({}, this.defaultContact, this.contactInfo),\n      errorInfo: {\n        name: false,\n        tel: false\n      }\n    };\n  },\n  watch: {\n    contactInfo: function contactInfo(val) {\n      this.data = val;\n    }\n  },\n  methods: {\n    onFocus: function onFocus(key) {\n      this.errorInfo[key] = false;\n    },\n    getErrorMessageByKey: function getErrorMessageByKey(key) {\n      var value = this.data[key].trim();\n\n      switch (key) {\n        case 'name':\n          return value ? '' : this.$t('nameEmpty');\n\n        case 'tel':\n          return this.telValidator(value) ? '' : this.$t('telInvalid');\n      }\n    },\n    onSave: function onSave() {\n      var _this = this;\n\n      var isValid = ['name', 'tel'].every(function (item) {\n        var msg = _this.getErrorMessageByKey(item);\n\n        if (msg) {\n          _this.errorInfo[item] = true;\n          Toast(msg);\n        }\n\n        return !msg;\n      });\n\n      if (isValid && !this.isSaving) {\n        this.$emit('save', this.data);\n      }\n    },\n    onDelete: function onDelete() {\n      var _this2 = this;\n\n      Dialog.confirm({\n        message: this.$t('confirmDelete')\n      }).then(function () {\n        _this2.$emit('delete', _this2.data);\n      });\n    }\n  }\n});",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,OAAA,KAAA,MAAA,UAAA;AACA,OAAA,SAAA,MAAA,WAAA;AACA,OAAA,MAAA,MAAA,WAAA;AACA,OAAA,KAAA,MAAA,UAAA;AACA,OAAA,cAAA,MAAA,0BAAA;AACA,OAAA,MAAA,MAAA,iBAAA;AAEA,IAAA,cAAA,GAAA;AACA,EAAA,EAAA,EAAA,EADA;AAEA,EAAA,GAAA,EAAA,EAFA;AAGA,EAAA,IAAA,EAAA;AAHA,CAAA;AAMA,eAAA,MAAA,CAAA;AACA,EAAA,IAAA,EAAA,cADA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,KAAA,EAAA,KADA;AAEA,IAAA,SAAA,EAAA;AAFA,GAHA;AAQA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA,OADA;AAEA,IAAA,QAAA,EAAA,OAFA;AAGA,IAAA,UAAA,EAAA,OAHA;AAIA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAAA,iCAAA,cAAA;AAAA;AAFA,KAJA;AAQA,IAAA,YAAA,EAAA;AACA,MAAA,IAAA,EAAA,QADA;AAEA,MAAA,OAAA,EAAA;AAFA;AARA,GARA;AAsBA,EAAA,IAtBA,kBAsBA;AACA,WAAA;AACA,MAAA,IAAA,oBACA,KAAA,cADA,EAEA,KAAA,WAFA,CADA;AAKA,MAAA,SAAA,EAAA;AACA,QAAA,IAAA,EAAA,KADA;AAEA,QAAA,GAAA,EAAA;AAFA;AALA,KAAA;AAUA,GAjCA;AAmCA,EAAA,KAAA,EAAA;AACA,IAAA,WADA,uBACA,GADA,EACA;AACA,WAAA,IAAA,GAAA,GAAA;AACA;AAHA,GAnCA;AAyCA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,mBACA,GADA,EACA;AACA,WAAA,SAAA,CAAA,GAAA,IAAA,KAAA;AACA,KAHA;AAKA,IAAA,oBALA,gCAKA,GALA,EAKA;AACA,UAAA,KAAA,GAAA,KAAA,IAAA,CAAA,GAAA,EAAA,IAAA,EAAA;;AACA,cAAA,GAAA;AACA,aAAA,MAAA;AACA,iBAAA,KAAA,GAAA,EAAA,GAAA,KAAA,EAAA,CAAA,WAAA,CAAA;;AACA,aAAA,KAAA;AACA,iBAAA,KAAA,YAAA,CAAA,KAAA,IAAA,EAAA,GAAA,KAAA,EAAA,CAAA,YAAA,CAAA;AAJA;AAMA,KAbA;AAeA,IAAA,MAfA,oBAeA;AAAA;;AACA,UAAA,OAAA,GAAA,CAAA,MAAA,EAAA,KAAA,EAAA,KAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,GAAA,GAAA,KAAA,CAAA,oBAAA,CAAA,IAAA,CAAA;;AACA,YAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,SAAA,CAAA,IAAA,IAAA,IAAA;AACA,UAAA,KAAA,CAAA,GAAA,CAAA;AACA;;AACA,eAAA,CAAA,GAAA;AACA,OAPA,CAAA;;AASA,UAAA,OAAA,IAAA,CAAA,KAAA,QAAA,EAAA;AACA,aAAA,KAAA,CAAA,MAAA,EAAA,KAAA,IAAA;AACA;AACA,KA5BA;AA8BA,IAAA,QA9BA,sBA8BA;AAAA;;AACA,MAAA,MAAA,CAAA,OAAA,CAAA;AACA,QAAA,OAAA,EAAA,KAAA,EAAA,CAAA,eAAA;AADA,OAAA,EAEA,IAFA,CAEA,YAAA;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,QAAA,EAAA,MAAA,CAAA,IAAA;AACA,OAJA;AAKA;AApCA;AAzCA,CAAA,CAAA","sourcesContent":["<template>\n  <div :class=\"b()\">\n    <cell-group>\n      <field\n        v-model=\"data.name\"\n        maxlength=\"30\"\n        :label=\"$t('name')\"\n        :placeholder=\"$t('nameEmpty')\"\n        :error=\"errorInfo.name\"\n        @focus=\"onFocus('name')\"\n      />\n      <field\n        v-model=\"data.tel\"\n        type=\"tel\"\n        :label=\"$t('tel')\"\n        :placeholder=\"$t('telEmpty')\"\n        :error=\"errorInfo.tel\"\n        @focus=\"onFocus('tel')\"\n      />\n    </cell-group>\n    <div :class=\"b('buttons')\">\n      <x-button block :loading=\"isSaving\" @click=\"onSave\" type=\"danger\">{{ $t('save') }}</x-button>\n      <x-button block :loading=\"isDeleting\" @click=\"onDelete\" v-if=\"isEdit\">{{ $t('delete') }}</x-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Field from '../field';\nimport VanButton from '../button';\nimport Dialog from '../dialog';\nimport Toast from '../toast';\nimport validateMobile from '../utils/validate/mobile';\nimport create from '../utils/create';\n\nconst defaultContact = {\n  id: '',\n  tel: '',\n  name: ''\n};\n\nexport default create({\n  name: 'contact-edit',\n\n  components: {\n    Field,\n    VanButton\n  },\n\n  props: {\n    isEdit: Boolean,\n    isSaving: Boolean,\n    isDeleting: Boolean,\n    contactInfo: {\n      type: Object,\n      default: () => ({ ...defaultContact })\n    },\n    telValidator: {\n      type: Function,\n      default: validateMobile\n    }\n  },\n\n  data() {\n    return {\n      data: {\n        ...this.defaultContact,\n        ...this.contactInfo\n      },\n      errorInfo: {\n        name: false,\n        tel: false\n      }\n    };\n  },\n\n  watch: {\n    contactInfo(val) {\n      this.data = val;\n    }\n  },\n\n  methods: {\n    onFocus(key) {\n      this.errorInfo[key] = false;\n    },\n\n    getErrorMessageByKey(key) {\n      const value = this.data[key].trim();\n      switch (key) {\n        case 'name':\n          return value ? '' : this.$t('nameEmpty');\n        case 'tel':\n          return this.telValidator(value) ? '' : this.$t('telInvalid');\n      }\n    },\n\n    onSave() {\n      const isValid = ['name', 'tel'].every(item => {\n        const msg = this.getErrorMessageByKey(item);\n        if (msg) {\n          this.errorInfo[item] = true;\n          Toast(msg);\n        }\n        return !msg;\n      });\n\n      if (isValid && !this.isSaving) {\n        this.$emit('save', this.data);\n      }\n    },\n\n    onDelete() {\n      Dialog.confirm({\n        message: this.$t('confirmDelete')\n      }).then(() => {\n        this.$emit('delete', this.data);\n      });\n    }\n  }\n});\n</script>\n"],"sourceRoot":"node_modules/healen-x-ui/packages/contact-edit"}]}