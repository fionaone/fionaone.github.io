{"remainingRequest":"/Users/zsy/Projects/about_me/node_modules/thread-loader/dist/cjs.js!/Users/zsy/Projects/about_me/node_modules/babel-loader/lib/index.js!/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zsy/Projects/about_me/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zsy/Projects/about_me/node_modules/healen-x-ui/packages/sku/components/SkuMessages.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zsy/Projects/about_me/node_modules/healen-x-ui/packages/sku/components/SkuMessages.vue","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport create from '../../utils/create';\nimport Field from '../../field';\nimport validateEmail from '../../utils/validate/email';\nimport validateNumber from '../../utils/validate/number';\nimport SkuImgUploader from './SkuImgUploader';\nvar PLACEHOLDER = {\n  id_no: '输入身份证号码',\n  text: '输入文本',\n  tel: '输入数字',\n  email: '输入邮箱',\n  date: '点击选择日期',\n  time: '点击选择时间',\n  textarea: '点击填写段落文本'\n};\nexport default create({\n  name: 'sku-messages',\n  components: {\n    SkuImgUploader: SkuImgUploader,\n    Field: Field\n  },\n  props: {\n    messages: Array,\n    messageConfig: Object,\n    goodsId: [Number, String]\n  },\n  data: function data() {\n    return {\n      messageValues: this.resetMessageValues(this.messages)\n    };\n  },\n  watch: {\n    messages: function messages(val) {\n      this.messageValues = this.resetMessageValues(val);\n    }\n  },\n  computed: {\n    messagePlaceholderMap: function messagePlaceholderMap() {\n      return this.messageConfig.placeholderMap || {};\n    }\n  },\n  methods: {\n    resetMessageValues: function resetMessageValues(messages) {\n      return (messages || []).map(function () {\n        return {\n          value: ''\n        };\n      });\n    },\n    getType: function getType(message) {\n      if (+message.multiple === 1) {\n        return 'textarea';\n      }\n\n      if (message.type === 'id_no') {\n        return 'text';\n      }\n\n      return message.datetime > 0 ? 'datetime-local' : message.type;\n    },\n    getMessages: function getMessages() {\n      var _this = this;\n\n      var messages = {};\n      this.messageValues.forEach(function (item, index) {\n        var value = item.value;\n\n        if (_this.messages[index].datetime > 0) {\n          value = value.replace(/T/g, ' ');\n        }\n\n        messages[\"message_\".concat(index)] = value;\n      });\n      return messages;\n    },\n    getCartMessages: function getCartMessages() {\n      var _this2 = this;\n\n      var messages = {};\n      this.messageValues.forEach(function (item, index) {\n        var value = item.value;\n        var message = _this2.messages[index];\n\n        if (message.datetime > 0) {\n          value = value.replace(/T/g, ' ');\n        }\n\n        messages[message.name] = value;\n      });\n      return messages;\n    },\n    getPlaceholder: function getPlaceholder(message) {\n      var type = +message.multiple === 1 ? 'textarea' : message.type;\n      return this.messagePlaceholderMap[type] || PLACEHOLDER[type];\n    },\n    validateMessages: function validateMessages() {\n      var values = this.messageValues;\n\n      for (var i = 0; i < values.length; i++) {\n        var value = values[i].value;\n        var message = this.messages[i];\n\n        if (value === '') {\n          // 必填字段的校验\n          if (message.required == '1') {\n            // eslint-disable-line\n            var textType = message.type === 'image' ? '请上传' : '请填写';\n            return textType + message.name;\n          }\n        } else {\n          if (message.type === 'tel' && !validateNumber(value)) {\n            return '请填写正确的数字格式留言';\n          }\n\n          if (message.type === 'mobile' && !/^\\d{6,20}$/.test(value)) {\n            return '手机号长度为6-20位数字';\n          }\n\n          if (message.type === 'email' && !validateEmail(value)) {\n            return '请填写正确的邮箱';\n          }\n\n          if (message.type === 'id_no' && (value.length < 15 || value.length > 18)) {\n            return '请填写正确的身份证号码';\n          }\n        }\n      }\n    }\n  }\n});",{"version":3,"sources":["SkuMessages.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <cell-group :class=\"b()\">\n    <template v-for=\"(message, index) in messages\">\n      <cell\n        v-if=\"message.type === 'image'\"\n        :class=\"b('image-cell')\"\n        label=\"仅限一张\"\n        :key=\"`${goodsId}-${index}`\"\n        :required=\"message.required == '1'\"\n        :title=\"message.name\"\n      >\n        <sku-img-uploader\n          v-model=\"messageValues[index].value\"\n          :upload-img=\"messageConfig.uploadImg\"\n          :max-size=\"messageConfig.uploadMaxSize\"\n        />\n      </cell>\n      <field\n        v-else\n        v-model=\"messageValues[index].value\"\n        maxlength=\"200\"\n        :key=\"`${goodsId}-${index}`\"\n        :required=\"message.required == '1'\"\n        :label=\"message.name\"\n        :placeholder=\"getPlaceholder(message)\"\n        :type=\"getType(message)\"\n      />\n    </template>\n  </cell-group>\n</template>\n\n<script>\nimport create from '../../utils/create';\nimport Field from '../../field';\nimport validateEmail from '../../utils/validate/email';\nimport validateNumber from '../../utils/validate/number';\nimport SkuImgUploader from './SkuImgUploader';\n\nconst PLACEHOLDER = {\n  id_no: '输入身份证号码',\n  text: '输入文本',\n  tel: '输入数字',\n  email: '输入邮箱',\n  date: '点击选择日期',\n  time: '点击选择时间',\n  textarea: '点击填写段落文本'\n};\n\nexport default create({\n  name: 'sku-messages',\n\n  components: {\n    SkuImgUploader,\n    Field\n  },\n\n  props: {\n    messages: Array,\n    messageConfig: Object,\n    goodsId: [Number, String]\n  },\n\n  data() {\n    return {\n      messageValues: this.resetMessageValues(this.messages)\n    };\n  },\n\n  watch: {\n    messages(val) {\n      this.messageValues = this.resetMessageValues(val);\n    }\n  },\n\n  computed: {\n    messagePlaceholderMap() {\n      return this.messageConfig.placeholderMap || {};\n    }\n  },\n\n  methods: {\n    resetMessageValues(messages) {\n      return (messages || []).map(() => ({ value: '' }));\n    },\n\n    getType(message) {\n      if (+message.multiple === 1) {\n        return 'textarea';\n      }\n      if (message.type === 'id_no') {\n        return 'text';\n      }\n      return message.datetime > 0 ? 'datetime-local' : message.type;\n    },\n\n    getMessages() {\n      const messages = {};\n\n      this.messageValues.forEach((item, index) => {\n        let value = item.value;\n        if (this.messages[index].datetime > 0) {\n          value = value.replace(/T/g, ' ');\n        }\n        messages[`message_${index}`] = value;\n      });\n\n      return messages;\n    },\n\n    getCartMessages() {\n      const messages = {};\n\n      this.messageValues.forEach((item, index) => {\n        let value = item.value;\n        const message = this.messages[index];\n        if (message.datetime > 0) {\n          value = value.replace(/T/g, ' ');\n        }\n        messages[message.name] = value;\n      });\n\n      return messages;\n    },\n\n    getPlaceholder(message) {\n      const type = +message.multiple === 1 ? 'textarea' : message.type;\n      return this.messagePlaceholderMap[type] || PLACEHOLDER[type];\n    },\n\n    validateMessages() {\n      const values = this.messageValues;\n\n      for (let i = 0; i < values.length; i++) {\n        const value = values[i].value;\n        const message = this.messages[i];\n\n        if (value === '') {\n          // 必填字段的校验\n          if (message.required == '1') { // eslint-disable-line\n            const textType = message.type === 'image'\n              ? '请上传'\n              : '请填写';\n            return textType + message.name;\n          }\n        } else {\n          if (message.type === 'tel' && !validateNumber(value)) {\n            return '请填写正确的数字格式留言';\n          }\n          if (message.type === 'mobile' && !/^\\d{6,20}$/.test(value)) {\n            return '手机号长度为6-20位数字';\n          }\n          if (message.type === 'email' && !validateEmail(value)) {\n            return '请填写正确的邮箱';\n          }\n          if (message.type === 'id_no' && (value.length < 15 || value.length > 18)) {\n            return '请填写正确的身份证号码';\n          }\n        }\n      }\n    }\n  }\n});\n</script>\n"],"sourceRoot":"node_modules/healen-x-ui/packages/sku/components"}]}