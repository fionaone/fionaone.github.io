{"remainingRequest":"/Users/zsy/Projects/about_me/node_modules/thread-loader/dist/cjs.js!/Users/zsy/Projects/about_me/node_modules/babel-loader/lib/index.js!/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zsy/Projects/about_me/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zsy/Projects/about_me/node_modules/healen-x-ui/packages/sku/components/SkuImgUploader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zsy/Projects/about_me/node_modules/healen-x-ui/packages/sku/components/SkuImgUploader.vue","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport VanUploader from '../../uploader';\nimport create from '../../utils/create';\nexport default create({\n  name: 'sku-img-uploader',\n  components: {\n    VanUploader: VanUploader\n  },\n  props: {\n    value: String,\n    uploadImg: {\n      type: Function,\n      required: true\n    },\n    maxSize: {\n      type: Number,\n      default: 6\n    }\n  },\n  data: function data() {\n    return {\n      // 正在上传的图片base 64\n      paddingImg: ''\n    };\n  },\n  computed: {\n    imgList: function imgList() {\n      return this.value && !this.paddingImg ? [this.value] : [];\n    }\n  },\n  methods: {\n    afterReadFile: function afterReadFile(file) {\n      var _this = this;\n\n      // 上传文件\n      this.paddingImg = file.content;\n      this.uploadImg(file.file, file.content).then(function (img) {\n        _this.$emit('input', img);\n\n        _this.$nextTick(function () {\n          _this.paddingImg = '';\n        });\n      }).catch(function () {\n        _this.paddingImg = '';\n      });\n    },\n    onOversize: function onOversize() {\n      this.$toast(\"\\u6700\\u5927\\u53EF\\u4E0A\\u4F20\\u56FE\\u7247\\u4E3A\".concat(this.maxSize, \"MB\\uFF0C\\u8BF7\\u5C1D\\u8BD5\\u538B\\u7F29\\u56FE\\u7247\\u5C3A\\u5BF8\"));\n    }\n  }\n});",{"version":3,"sources":["SkuImgUploader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,OAAA,WAAA,MAAA,gBAAA;AACA,OAAA,MAAA,MAAA,oBAAA;AAEA,eAAA,MAAA,CAAA;AACA,EAAA,IAAA,EAAA,kBADA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,WAAA,EAAA;AADA,GAHA;AAOA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA,MADA;AAEA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,QADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAFA;AAMA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AANA,GAPA;AAmBA,EAAA,IAnBA,kBAmBA;AACA,WAAA;AACA;AACA,MAAA,UAAA,EAAA;AAFA,KAAA;AAIA,GAxBA;AA0BA,EAAA,QAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,aAAA,KAAA,KAAA,IAAA,CAAA,KAAA,UAAA,GAAA,CAAA,KAAA,KAAA,CAAA,GAAA,EAAA;AACA;AAHA,GA1BA;AAgCA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,yBACA,IADA,EACA;AAAA;;AACA;AACA,WAAA,UAAA,GAAA,IAAA,CAAA,OAAA;AACA,WAAA,SAAA,CAAA,IAAA,CAAA,IAAA,EAAA,IAAA,CAAA,OAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,OAAA,EAAA,GAAA;;AACA,QAAA,KAAA,CAAA,SAAA,CAAA,YAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,EAAA;AACA,SAFA;AAGA,OALA,EAKA,KALA,CAKA,YAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,EAAA;AACA,OAPA;AAQA,KAZA;AAcA,IAAA,UAdA,wBAcA;AACA,WAAA,MAAA,2DAAA,KAAA,OAAA;AACA;AAhBA;AAhCA,CAAA,CAAA","sourcesContent":["<template>\n  <div :class=\"b()\">\n    <!-- 头部 -->\n    <x-uploader\n      :disabled=\"!!paddingImg\"\n      :after-read=\"afterReadFile\"\n      :max-size=\"maxSize * 1024 * 1024\"\n      @oversize=\"onOversize\"\n    >\n      <div :class=\"b('header')\">\n        <div v-if=\"paddingImg\">正在上传...</div>\n        <template v-else>\n          <icon name=\"photograph\" />\n          <span class=\"label\">{{ value ? '重拍' : '拍照' }}</span> 或\n          <icon name=\"photo\" />\n          <span class=\"label\">{{ value ? '重新选择照片' : '选择照片' }}</span>\n        </template>\n      </div>\n    </x-uploader>\n    <!-- 图片列表区域 -->\n    <div class=\"van-clearfix\" v-if=\"paddingImg || imgList.length > 0\">\n      <!-- 已有的图片,图片右上角显示删除按钮 -->\n      <div\n        v-for=\"img in imgList\"\n        :class=\"b('img')\"\n      >\n        <img :src=\"img\">\n        <icon name=\"clear\" :class=\"b('delete')\" @click=\"$emit('input', '')\" />\n      </div>\n      <!-- 正在上传的图片,有上传等待提示 -->\n      <div v-if=\"paddingImg\" :class=\"b('img')\">\n        <img :src=\"paddingImg\">\n        <loading :class=\"b('uploading')\" type=\"spinner\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport VanUploader from '../../uploader';\nimport create from '../../utils/create';\n\nexport default create({\n  name: 'sku-img-uploader',\n\n  components: {\n    VanUploader\n  },\n\n  props: {\n    value: String,\n    uploadImg: {\n      type: Function,\n      required: true\n    },\n    maxSize: {\n      type: Number,\n      default: 6\n    }\n  },\n\n  data() {\n    return {\n      // 正在上传的图片base 64\n      paddingImg: ''\n    };\n  },\n\n  computed: {\n    imgList() {\n      return this.value && !this.paddingImg ? [this.value] : [];\n    }\n  },\n\n  methods: {\n    afterReadFile(file) {\n      // 上传文件\n      this.paddingImg = file.content;\n      this.uploadImg(file.file, file.content).then(img => {\n        this.$emit('input', img);\n        this.$nextTick(() => {\n          this.paddingImg = '';\n        });\n      }).catch(() => {\n        this.paddingImg = '';\n      });\n    },\n\n    onOversize() {\n      this.$toast(`最大可上传图片为${this.maxSize}MB，请尝试压缩图片尺寸`);\n    }\n  }\n});\n</script>\n"],"sourceRoot":"node_modules/healen-x-ui/packages/sku/components"}]}