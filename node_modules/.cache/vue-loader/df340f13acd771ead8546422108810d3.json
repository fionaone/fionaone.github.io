{"remainingRequest":"/Users/zsy/Projects/about_me/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zsy/Projects/about_me/node_modules/healen-x-ui/packages/coupon-list/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zsy/Projects/about_me/node_modules/healen-x-ui/packages/coupon-list/index.vue","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zsy/Projects/about_me/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport create from '../utils/create';\nimport CouponItem from './Item';\nimport Field from '../field';\nimport VanButton from '../button';\nimport Tab from '../tab';\nimport Tabs from '../tabs';\n\nexport default create({\n  name: 'coupon-list',\n\n  components: {\n    Tab,\n    Tabs,\n    Field,\n    VanButton,\n    CouponItem\n  },\n\n  model: {\n    prop: 'code'\n  },\n\n  props: {\n    code: String,\n    closeButtonText: String,\n    inputPlaceholder: String,\n    exchangeButtonText: String,\n    exchangeButtonLoading: Boolean,\n    exchangeButtonDisabled: Boolean,\n    exchangeMinLength: {\n      type: Number,\n      default: 1\n    },\n    chosenCoupon: {\n      type: Number,\n      default: -1\n    },\n    coupons: {\n      type: Array,\n      default: () => []\n    },\n    disabledCoupons: {\n      type: Array,\n      default: () => []\n    },\n    displayedCouponIndex: {\n      type: Number,\n      default: -1\n    },\n    showExchangeBar: {\n      type: Boolean,\n      default: true\n    },\n    showCloseButton: {\n      type: Boolean,\n      default: true\n    }\n  },\n\n  data() {\n    return {\n      tab: 0,\n      winHeight: window.innerHeight,\n      currentCode: this.code || ''\n    };\n  },\n\n  computed: {\n    buttonDisabled() {\n      return (\n        !this.exchangeButtonLoading &&\n        (this.exchangeButtonDisabled || !this.currentCode ||\n          this.currentCode.length < this.exchangeMinLength)\n      );\n    },\n\n    title() {\n      return `${this.$t('enable')} (${this.coupons.length})`;\n    },\n\n    disabledTitle() {\n      return `${this.$t('disabled')} (${this.disabledCoupons.length})`;\n    },\n\n    listStyle() {\n      return {\n        height: this.winHeight - (this.showExchangeBar ? 140 : 94) + 'px'\n      };\n    }\n  },\n\n  watch: {\n    code(code) {\n      this.currentCode = code;\n    },\n\n    currentCode(code) {\n      this.$emit('input', code);\n    },\n\n    displayedCouponIndex(val) {\n      this.scrollToShowCoupon(val);\n    }\n  },\n\n  mounted() {\n    this.scrollToShowCoupon(this.displayedCouponIndex);\n  },\n\n  methods: {\n    onClickExchangeButton() {\n      this.$emit('exchange', this.currentCode);\n\n      // auto clear currentCode when not use v-model\n      if (!this.code) {\n        this.currentCode = '';\n      }\n    },\n\n    // scroll to show specific coupon\n    scrollToShowCoupon(index) {\n      if (index === -1) {\n        return;\n      }\n\n      this.$nextTick(() => {\n        const { card, list } = this.$refs;\n\n        /* istanbul ignore next */\n        if (list && card && card[index]) {\n          list.scrollTop = card[index].$el.offsetTop - 100;\n        }\n      });\n    }\n  }\n});\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/healen-x-ui/packages/coupon-list","sourcesContent":["<template>\n  <div :class=\"b()\">\n    <field\n      v-if=\"showExchangeBar\"\n      v-model=\"currentCode\"\n      clearable\n      :border=\"false\"\n      :class=\"b('field')\"\n      :placeholder=\"inputPlaceholder || $t('placeholder')\"\n      :maxlength=\"20\"\n    >\n      <x-button\n        slot=\"button\"\n        size=\"small\"\n        type=\"danger\"\n        :class=\"b('exchange')\"\n        :text=\"exchangeButtonText || $t('exchange')\"\n        :loading=\"exchangeButtonLoading\"\n        :disabled=\"buttonDisabled\"\n        @click=\"onClickExchangeButton\"\n      />\n    </field>\n    <tabs v-model=\"tab\" :class=\"b('tab')\" :line-width=\"120\">\n      <tab :title=\"title\">\n        <div :class=\"b('list')\" :style=\"listStyle\">\n          <coupon-item\n            ref=\"card\"\n            v-for=\"(item, index) in coupons\"\n            :key=\"item.id || item.name\"\n            :data=\"item\"\n            :chosen=\"index === chosenCoupon\"\n            @click.native=\"$emit('change', index)\"\n          />\n          <div v-if=\"!coupons.length\" :class=\"b('empty')\">\n            <img src=\"https://img.yzcdn.cn/v2/image/wap/trade/new_order/empty@2x.png\" >\n            <p>{{ $t('empty') }}</p>\n          </div>\n        </div>\n      </tab>\n      <tab :title=\"disabledTitle\">\n        <div :class=\"b('list')\" :style=\"listStyle\">\n          <coupon-item\n            disabled\n            v-for=\"item in disabledCoupons\"\n            :key=\"item.id || item.name\"\n            :data=\"item\"\n          />\n          <div v-if=\"!disabledCoupons.length\" :class=\"b('empty')\">\n            <img src=\"https://img.yzcdn.cn/v2/image/wap/trade/new_order/empty@2x.png\" >\n            <p>{{ $t('empty') }}</p>\n          </div>\n        </div>\n      </tab>\n    </tabs>\n    <x-button\n      v-show=\"showCloseButton\"\n      size=\"large\"\n      :class=\"b('close')\"\n      :text=\"closeButtonText || $t('close')\"\n      @click=\"$emit('change', -1)\"\n    />\n  </div>\n</template>\n\n<script>\nimport create from '../utils/create';\nimport CouponItem from './Item';\nimport Field from '../field';\nimport VanButton from '../button';\nimport Tab from '../tab';\nimport Tabs from '../tabs';\n\nexport default create({\n  name: 'coupon-list',\n\n  components: {\n    Tab,\n    Tabs,\n    Field,\n    VanButton,\n    CouponItem\n  },\n\n  model: {\n    prop: 'code'\n  },\n\n  props: {\n    code: String,\n    closeButtonText: String,\n    inputPlaceholder: String,\n    exchangeButtonText: String,\n    exchangeButtonLoading: Boolean,\n    exchangeButtonDisabled: Boolean,\n    exchangeMinLength: {\n      type: Number,\n      default: 1\n    },\n    chosenCoupon: {\n      type: Number,\n      default: -1\n    },\n    coupons: {\n      type: Array,\n      default: () => []\n    },\n    disabledCoupons: {\n      type: Array,\n      default: () => []\n    },\n    displayedCouponIndex: {\n      type: Number,\n      default: -1\n    },\n    showExchangeBar: {\n      type: Boolean,\n      default: true\n    },\n    showCloseButton: {\n      type: Boolean,\n      default: true\n    }\n  },\n\n  data() {\n    return {\n      tab: 0,\n      winHeight: window.innerHeight,\n      currentCode: this.code || ''\n    };\n  },\n\n  computed: {\n    buttonDisabled() {\n      return (\n        !this.exchangeButtonLoading &&\n        (this.exchangeButtonDisabled || !this.currentCode ||\n          this.currentCode.length < this.exchangeMinLength)\n      );\n    },\n\n    title() {\n      return `${this.$t('enable')} (${this.coupons.length})`;\n    },\n\n    disabledTitle() {\n      return `${this.$t('disabled')} (${this.disabledCoupons.length})`;\n    },\n\n    listStyle() {\n      return {\n        height: this.winHeight - (this.showExchangeBar ? 140 : 94) + 'px'\n      };\n    }\n  },\n\n  watch: {\n    code(code) {\n      this.currentCode = code;\n    },\n\n    currentCode(code) {\n      this.$emit('input', code);\n    },\n\n    displayedCouponIndex(val) {\n      this.scrollToShowCoupon(val);\n    }\n  },\n\n  mounted() {\n    this.scrollToShowCoupon(this.displayedCouponIndex);\n  },\n\n  methods: {\n    onClickExchangeButton() {\n      this.$emit('exchange', this.currentCode);\n\n      // auto clear currentCode when not use v-model\n      if (!this.code) {\n        this.currentCode = '';\n      }\n    },\n\n    // scroll to show specific coupon\n    scrollToShowCoupon(index) {\n      if (index === -1) {\n        return;\n      }\n\n      this.$nextTick(() => {\n        const { card, list } = this.$refs;\n\n        /* istanbul ignore next */\n        if (list && card && card[index]) {\n          list.scrollTop = card[index].$el.offsetTop - 100;\n        }\n      });\n    }\n  }\n});\n</script>\n"]}]}